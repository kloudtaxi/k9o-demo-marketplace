(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"30db":function(e,t,r){"use strict";var a=r("caf9"),s=r.n(a);s.a},"44e5":function(e,t,r){"use strict";var a=r("a5cf"),s=r.n(a);s.a},"4bf9":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"antialiased leading-tight",attrs:{id:"app"}},[r("div",{staticClass:"header-wrap fixed w-screen pt-2 pb-4 pl-8 pr-8 bg-white shadow-xl"},[r("div",{staticClass:"sm:flex items-center justify-between -mx-4"},[r("div",{staticClass:"w-full sm:w-2/6 md:w-1/6 sm:mx-4"},[r("global-header")],1),r("div",{staticClass:"w-full sm:w-4/6 md:w-5/6 sm:mx-4"},[r("search",{on:{input:e.submitSearch}})],1)])]),r("div",{staticClass:"content-wrapper container mx-auto max-w-6xl"},[r("div",{staticClass:"errors"},[e.productInitApiLog1||e.productInitApiLog2?r("error",{scopedSlots:e._u([{key:"header",fn:function(){return[r("p",[e._v("There are Product API issues:")])]},proxy:!0},{key:"body",fn:function(){return[e.productInitApiLog1?r("code",[r("pre",[e._v(e._s(e.productInitApiLog1))])]):e._e(),e.productInitApiLog2?r("code",[r("pre",[e._v(e._s(e.productInitApiLog2))])]):e._e()]},proxy:!0}],null,!1,3599995230)}):e._e(),e.searchApiError?r("error",{scopedSlots:e._u([{key:"header",fn:function(){return[r("p",[e._v("There was a Search API error:")])]},proxy:!0},{key:"body",fn:function(){return[r("code",[r("pre",{staticClass:"overflow-x-auto pt-4 pb-4"},[e._v(e._s(e.searchApiError))])])]},proxy:!0}],null,!1,2729109869)}):e._e(),e.assetUploadError?r("error",{scopedSlots:e._u([{key:"header",fn:function(){return[r("p",[e._v("There was an Asset Upload API error:")])]},proxy:!0},{key:"body",fn:function(){return[r("code",[r("pre",{staticClass:"overflow-x-auto pt-4 pb-4"},[e._v(e._s(e.assetUploadError))])])]},proxy:!0}],null,!1,3096971867)}):e._e()],1),e.dataIsLoaded?r("div",[e.items&&e.items.length>0?r("div",{staticClass:"results-info mb-4 mt-4 text-gray-600"},[r("p",[e._v("\n          Viewing "+e._s(e.items.length)+" results\n          "),e.searchQuery?r("span",[e._v("\n            for\n            "),r("strong",{staticClass:"bg-gray-200 rounded px-2 py-1"},[e._v(e._s(e.searchQuery))])]):e._e()])]):e._e(),r("search-results",{attrs:{items:e.paginatedData,query:e.searchQuery}}),r("div",{staticClass:"border-t border-gray-300 pagination-controls flex items-center justify-between -mx-4 mb-8 pt-8"},[r("div",{staticClass:"mx-4"},[r("button",{staticClass:"inline-block md:block bg-green hover:bg-green-lighter text-white text-center font-bold py-2 px-4 rounded",class:{"opacity-50 cursor-not-allowed":0===e.pageNumber},attrs:{type:"button",disabled:0===e.pageNumber},on:{click:e.prevPage}},[e._v("← Previous")])]),r("div",{staticClass:"mx-4 text-gray-600"},[r("p",[e._v("Page "+e._s(e.pageNumber+1)+" of "+e._s(e.realPageCount)+" pages")])]),r("div",{staticClass:"mx-4"},[r("button",{staticClass:"inline-block md:block bg-green hover:bg-green-lighter text-white text-center font-bold py-2 px-4 rounded",class:{"opacity-50 cursor-not-allowed":e.pageNumber>=e.realPageCount-1},attrs:{type:"button",disabled:e.pageNumber>=e.realPageCount-1},on:{click:e.nextPage}},[e._v("Next →")])])])],1):r("div",{staticClass:"loading-screen h-screen flex items-center justify-center text-pink"},[r("fa-icon",{attrs:{icon:["fas","circle-notch"],size:"5x",spin:""}})],1),r("global-footer")],1)])},n=[],o=(r("96cf"),r("3b8d")),i=r("bc3a"),c=r.n(i),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"global-header text-center"},[a("img",{staticClass:"mx-auto",attrs:{src:r("a8c2"),alt:"Kuma Marketplace Logo"}})])},u=[],d=r("2877"),p={},f=Object(d["a"])(p,l,u,!1,null,null,null),m=f.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",{staticClass:"global-footer text-center mt-8 p-8 border-t border-gray-300"},[r("p",[e._v("© "+e._s((new Date).getFullYear())+" Kuma Marketplace")])])},b=[],v={},g=Object(d["a"])(v,h,b,!1,null,null,null),x=g.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search"},[r("form",{staticClass:"flex flex-row items-center -mx-4 mt-4",on:{submit:function(e){e.preventDefault()}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"border-2 border-gray-400 px-4 py-4 flex-grow mx-4 text-xl rounded",attrs:{type:"search",name:"search",id:"search",placeholder:"Search products by title...",autocomplete:"off"},domProps:{value:e.searchQuery},on:{keyup:e.search,input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])])},y=[],w={data:function(){return{searchQuery:""}},methods:{search:function(e){var t=e.target.value,r=event.keyCode||event.charCode;this.searchQuery=t,8!==r&&46!==r&&this.$emit("input",e),t||this.$emit("input",e)}}},C=w,k=Object(d["a"])(C,_,y,!1,null,null,null),P=k.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-results"},[e.items&&e.items.length?r("ul",e._l(e.items,(function(e){return r("li",{key:e._id},[r("product",{attrs:{index:e.data.index,name:e.data.name,category:e.data.category,picture:e.data.picture,detail:e.data.productDetail,quantity:e.data.quantity,size:e.data.size,price:e.data.price,company:e.data.company,specialOffer:e.data.specialOffer}})],1)})),0):r("div",{staticClass:"no-results h-screen flex items-center justify-center text-4xl text-pink font-bold"},[e.query&&e.query.length?r("p",[e._v("No search results for "+e._s(e.query)+"!")]):r("p",[e._v("No search results!")])])])},E=[],O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product mb-8 pt-8 border-t border-gray-300 md:flex flex-row -mx-4",class:{"special-offer":e.specialOffer}},[e.specialOffer?r("div",{staticClass:"ribbon"},[r("span",[e._v("Sale!")])]):e._e(),r("div",{staticClass:"md:w-1/5 px-4"},[r("h2",{staticClass:"product__title text-2xl text-center font-bold mb-4 md:hidden"},[e._v(e._s(e.name))]),r("div",{staticClass:"product__image bg-white"},[r("img",{staticClass:"max-w-xs md:max-w-full rounded border-4 border-solid border-gray-300 shadow-lg mx-auto",attrs:{src:e.picture,alt:"A picture of "+e.name}})]),r("div",{staticClass:"product__actions mt-4"},[e.specialOffer?r("p",{staticClass:"text-center mt-4 font-bold"},[r("span",{staticClass:"text-gray-500 line-through text-xl"},[e._v(e._s(e.cleanPrice))]),r("br"),r("span",{staticClass:"text-pink text-3xl"},[e._v(e._s(e.discountedPrice))])]):r("p",{staticClass:"text-center mt-4 font-bold text-3xl"},[e._v("\n        "+e._s(e.cleanPrice)+"\n      ")]),r("p",{staticClass:"text-center mt-4"},[r("a",{staticClass:"inline-block md:block bg-green hover:bg-green-lighter text-white text-center font-bold py-2 px-4 rounded",attrs:{href:"#"}},[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","shopping-cart"]}}),e._v("Add to Cart\n        ")],1)])])]),r("div",{staticClass:"md:w-4/5 px-4"},[r("h2",{staticClass:"product__title text-3xl font-bold mb-4 hidden md:block"},[e._v("\n      "+e._s(e.name)+"\n    ")]),r("h3",{staticClass:"product__company text-xl text-pink font-bold italic mb-4 mt-4 md:mt-0 text-center md:text-left"},[e._v("Made by "+e._s(e.company))]),r("div",{staticClass:"product__detail text-lg leading-normal"},[r("p",[e._v(e._s(e.detail))])]),r("div",{staticClass:"product__extras mt-4 p-4 bg-gray-200 rounded"},[r("div",{staticClass:"md:flex items-center justify-between flex-row -mx-4"},[r("div",{staticClass:"mx-4"},[r("ul",{staticClass:"sm:flex text-gray-600 flex-row -mx-4"},[r("li",{staticClass:"mx-4"},[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","tshirt"]}}),r("span",[e._v(e._s(e.size))])],1),r("li",{staticClass:"mx-4 mt-4 sm:mt-0"},[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","tag"]}}),r("span",[e._v(e._s(e.category))])],1),r("li",{staticClass:"mx-4 mt-4 sm:mt-0"},[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","box-open"]}}),e._v("Only\n              "),r("strong",[e._v(e._s(e.quantity))]),e._v(" Left!\n            ")],1)])]),r("div",{staticClass:"mx-4 mt-4 md:mt-0"},[r("p",[r("button",{staticClass:"bg-green hover:bg-green-lighter text-white text-center font-bold py-2 px-4 rounded",attrs:{type:"button"},on:{click:e.showModal,keydown:function(t){return t.preventDefault(),e.closeOnEsc(t)}}},[e._v("Read Reviews")])])])])]),r("modal",{directives:[{name:"show",rawName:"v-show",value:e.isModalVisible,expression:"isModalVisible"}],on:{close:e.closeModal},scopedSlots:e._u([{key:"header",fn:function(){return[r("h2",{staticClass:"font-bold text-3xl text-center border-b border-gray-300 pb-4"},[e._v("Reviews for "+e._s(e.name))])]},proxy:!0},{key:"body",fn:function(){return[e.modalApiError?r("error",{scopedSlots:e._u([{key:"header",fn:function(){return[r("p",[e._v("There was a Review Redis API error:")])]},proxy:!0},{key:"body",fn:function(){return[r("code",[r("pre",[e._v(e._s(e.modalApiError))])])]},proxy:!0}],null,!1,2424995278)}):e._e(),e.isModalDataLoaded?r("div",[r("reviews",{attrs:{items:e.reviews}})],1):r("div",{staticClass:"loading-reviews flex items-center justify-center text-pink mt-8 mb-8"},[r("fa-icon",{attrs:{icon:["fas","circle-notch"],size:"3x",spin:""}})],1)]},proxy:!0}])})],1)])},S=[],j=(r("a481"),r("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product__reviews-wrap mt-8"},[e.items?r("div",{staticClass:"product__reviews"},[e._t("header"),r("ul",e._l(e.items,(function(t){return r("li",{key:t.id,staticClass:"product__reviews__item p-4 mt-4 shadow-md bg-gray-200 rounded"},[r("h3",{staticClass:"product__reviews__title flex flex-row items-center font-bold mb-2"},[r("div",{staticClass:"mr-4"},[r("h3",{staticClass:"text-xl"},[e._v(e._s(t.name))])]),r("div",[r("ul",{staticClass:"flex"},e._l(t.rating,(function(e){return r("li",{key:e},[r("fa-icon",{staticClass:"text-lg mr-2 text-yellow-600",attrs:{icon:["fas","star"]}})],1)})),0)])]),r("p",{staticClass:"mb-2"},[e._v(e._s(t.review))])])})),0)],2):r("div",{staticClass:"text-center font-bold p-8"},[r("p",[e._v("There are no reviews for this product yet.")])])])}),I=[],L={props:{items:""}},M=L,N=Object(d["a"])(M,j,I,!1,null,null,null),R=N.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"modal-fade"}},[r("div",{staticClass:"modal-backdrop"},[r("div",{staticClass:"modal bg-white rounded p-8 shadow-xl",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},[r("header",{staticClass:"modal__header",attrs:{id:"modalTitle"}},[r("button",{staticClass:"modal__close",attrs:{type:"button","aria-label":"Close modal"},on:{click:e.close}},[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 357 357"}},[r("path",{attrs:{d:"M357 35.7L321.3 0 178.5 142.8 35.7 0 0 35.7l142.8 142.8L0 321.3 35.7 357l142.8-142.8L321.3 357l35.7-35.7-142.8-142.8z"}})])]),e._t("header")],2),r("div",{staticClass:"modal__body",attrs:{id:"modalDescription"}},[e._t("body")],2),r("footer",{staticClass:"modal__footer"},[e._t("footer")],2)])])])},T=[],z={name:"modal",methods:{close:function(){this.$emit("close")}}},Q=z,D=(r("30db"),Object(d["a"])(Q,$,T,!1,null,null,null)),q=D.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"error bg-red-300 rounded p-4 mt-4 mb-4 overflow-hidden"},[r("header",{staticClass:"error__header font-bold text-xl"},[e._t("header")],2),r("div",{staticClass:"error__body"},[e._t("body")],2)])},G=[],F={},K=Object(d["a"])(F,V,G,!1,null,null,null),U=K.exports,H=c.a.create({}),B={data:function(){return{reviews:Array,isModalVisible:!1,modalApiError:null,isModalDataLoaded:!1}},props:{id:Number,index:Number,price:String,quantity:Number,picture:String,company:String,size:String,category:String,name:String,detail:String,specialOffer:Boolean},components:{Reviews:R,Modal:q,Error:U},computed:{cleanPrice:function(){var e=parseInt(this.price.replace("$","")).toFixed(2);return"$".concat(e)},discountedPrice:function(){var e=this.cleanPrice.replace("$",""),t=.5,r=e-e*t;return"$".concat(r.toFixed(2))}},methods:{showModal:function(){this.isModalVisible=!0,this.fetchReviews(this.index)},closeModal:function(){this.isModalVisible=!1},closeOnEsc:function(e){this.isModalVisible&&27===e.keyCode&&this.closeModal()},fetchReviews:function(e){var t=this;H({url:"".concat("","/items/").concat(e,"/reviews/"),method:"GET"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.data.code,!a||!a.length){e.next=5;break}t.modalApiError=a,e.next=9;break;case 5:return e.next=7,r.data;case 7:t.reviews=e.sent,t.modalApiError=null;case 9:return e.next=11,!0;case 11:t.isModalDataLoaded=e.sent;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.modalApiError=e,console.error("Reviews Redis API Error:",e)}))}}},J=B,Y=(r("7cd1"),Object(d["a"])(J,O,S,!1,null,null,null)),W=Y.exports,X={props:["items","query"],components:{Product:W}},Z=X,ee=(r("44e5"),Object(d["a"])(Z,A,E,!1,null,null,null)),te=ee.exports,re="",ae="?q",se=c.a.create({}),ne=(c.a.create({}),{name:"app",metaInfo:{title:"Home",titleTemplate:"%s | Kuma Marketplace",htmlAttrs:{lang:"en"}},data:function(){return{items:[],dataIsLoaded:!1,searchQuery:"",productInitApiLog1:null,productInitApiLog2:null,searchApiError:"",assetUploadError:"",uploadHasAlreadyRun:!1,pageNumber:0,pageSize:10,realPageCount:""}},components:{GlobalHeader:m,GlobalFooter:x,Search:P,SearchResults:te,Error:U},created:function(){this.loadAllProducts()},computed:{paginatedData:function(){var e=this.items;if(e&&e.length>0){var t=this.pageNumber*this.pageSize,r=t+this.pageSize;return e.slice(t,r)}console.error("No items to paginate!")}},methods:{loadAllProducts:function(){var e=this;se({url:"".concat(re,"/items").concat(ae),method:"GET"}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.data;case 2:e.items=t.sent,e.dataIsLoaded=!0,e.calculatePageCount(),r.message?e.productInitApiLog1=r.message:e.productInitApiLog1=null,r.data.msg?e.productInitApiLog2=r.data.msg:e.productInitApiLog2=null;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.productInitApiLog1=t,console.error("Product API Error:",t)}))},submitSearch:function(e){var t=this,r=e.target.value.trim().toLowerCase();se({url:"".concat(re,"/items").concat(ae,"=").concat(r),method:"GET"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,a.data;case 3:return t.items=e.sent,e.next=6,r;case 6:t.searchQuery=e.sent,e.next=12;break;case 9:return e.next=11,t.loadAllProducts();case 11:t.searchQuery="";case 12:t.pageNumber=0,t.calculatePageCount();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.searchApiError=e,console.error("Search API Error:",e)}))},calculatePageCount:function(){var e=this.items.length,t=this.pageSize,r=Math.ceil(e/t);this.realPageCount=r<this.pageSize?r:this.pageSize},nextPage:function(){this.pageNumber++},prevPage:function(){this.pageNumber--}}}),oe=ne,ie=(r("5c0b"),Object(d["a"])(oe,s,n,!1,null,null,null)),ce=ie.exports,le=r("58ca"),ue=(r("f5df"),r("ecee")),de=r("c074"),pe=r("ad3d");ue["c"].add(de["e"],de["d"],de["a"],de["f"],de["c"],de["b"]),a["a"].component("fa-icon",pe["a"]),a["a"].use(le["a"]),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(ce)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var a=r("e332"),s=r.n(a);s.a},"7cd1":function(e,t,r){"use strict";var a=r("4bf9"),s=r.n(a);s.a},a5cf:function(e,t,r){},a8c2:function(e,t,r){e.exports=r.p+"img/Kuma-new-logo.4d3c2892.svg"},caf9:function(e,t,r){},e332:function(e,t,r){}});
//# sourceMappingURL=app.121ef312.js.map